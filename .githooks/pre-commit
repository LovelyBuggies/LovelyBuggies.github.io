#!/usr/bin/env bash
set -euo pipefail

# Prevent committing local build artifacts
blocked='^(dist/|notes/public/|notes/resources/|notes/.hugo_build.lock)'
if git diff --cached --name-only | grep -E "$blocked" >/dev/null 2>&1; then
  echo "Aborting commit: build artifacts detected (dist/, notes/public/, notes/resources/, .hugo_build.lock)." >&2
  git diff --cached --name-only | grep -E "$blocked" || true
  exit 1
fi

exit 0

